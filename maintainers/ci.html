<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="InstructLab CLI Release Strategy" href="release-strategy.html" /><link rel="prev" title="Maintainer Documentation" href="index.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>CI for InstructLab - InstructLab documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">InstructLab  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">InstructLab  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ilab.html">CLI Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">CLI Configuration</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/index.html">Helpful User Guides</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Helpful User Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../user/PROMPTING-FAQ.html">Prompting FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/instructlab_models.html">InstructLab LLM guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/converting_GGUF.html">Optional: Converting a Model to GGUF and Quantizing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../accelerators/index.html">Accelerators</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Accelerators</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../accelerators/habana-gaudi.html">Intel Gaudi / Habana Labs HPU with SynapseAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accelerators/amd-rocm.html">InstructLab toolbox container for AMD ROCm GPUs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accelerators/gpu-acceleration.html">üèéÔ∏è Making <code class="docutils literal notranslate"><span class="pre">ilab</span></code> go fast</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Maintainer Documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Maintainer Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">CI for InstructLab</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-strategy.html">InstructLab CLI Release Strategy</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/maintainers/ci.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="ci-for-instructlab">
<h1>CI for InstructLab<a class="headerlink" href="#ci-for-instructlab" title="Link to this heading">¬∂</a></h1>
<p><img alt="InstructLab CI Ecosystem" src="../_images/instructlab-ci-ecosystem.png" /></p>
<section id="unit-tests">
<h2>Unit tests<a class="headerlink" href="#unit-tests" title="Link to this heading">¬∂</a></h2>
<p>Unit tests are designed to test specific InstructLab components or features in isolation. In CI, these tests are run on Python 3.11 and Python 3.10 on CPU-only Ubuntu
runners as well as Python 3.11 on CPU-only MacOS runners. Generally, new code should be adding or modifying unit tests.</p>
<p>All unit tests currently live in the <code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory and are run with <a class="reference external" href="https://docs.pytest.org/">pytest</a> via <a class="reference external" href="https://tox.wiki/">tox</a>.</p>
</section>
<section id="functional-tests">
<h2>Functional tests<a class="headerlink" href="#functional-tests" title="Link to this heading">¬∂</a></h2>
<p>Functional tests are designed to test InstructLab components or features in tandem, but not necessarily as part of a complex workflow. In CI, these tests are run on
Python 3.11 and Python 3.10 on CPU-only Ubuntu runners as well as Python 3.11 on CPU-only MacOS runners. New code may or may not need a functional test but should strive
to implement one if possible.</p>
<p>The functional test script is Shell-based and can be found at <code class="docutils literal notranslate"><span class="pre">scripts/functional-tests.sh</span></code>.</p>
</section>
<section id="end-to-end-e2e-tests">
<h2>End-to-end (E2E) tests<a class="headerlink" href="#end-to-end-e2e-tests" title="Link to this heading">¬∂</a></h2>
<p>There are two E2E test scripts.</p>
<p>The first can be found at <code class="docutils literal notranslate"><span class="pre">scripts/e2e-ci.sh</span></code>. This script is designed to test the InstructLab workflow from end-to-end, mimicking real user behavior,
across three different ‚Äút-shirt sizes‚Äù of systems. Most E2E CI jobs use this script.</p>
<p>The second can be found at <code class="docutils literal notranslate"><span class="pre">scripts/e2e-custom.sh</span></code>. This script takes arguments that control which features are used to allow
varying test coverage based on the resources available on a given test runner. The
<a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-aws-custom.yml">‚Äúcustom‚Äù E2E CI job</a> uses this script,
though you can specify to use another script such as <code class="docutils literal notranslate"><span class="pre">e2e-ci.sh</span></code> if you want to test changes to a different code path that doesn‚Äôt automatically run
against a pull request.</p>
<p>There is currently a <a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-t4-x1.yml">‚Äúsmall‚Äù t-shirt size E2E job</a> and a
<a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l4-x1.yml">‚Äúmedium‚Äù t-shirt size E2E job</a>.
These jobs runs automatically on all PRs and after commits merge to <code class="docutils literal notranslate"><span class="pre">main</span></code> or release branches. They depend upon the successful completion of any linting type jobs.</p>
<p>There is also a <a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l40s-x4.yml">‚Äúlarge‚Äù t-shirt size E2E job</a> that can be
<a class="reference external" href="https://github.com/instructlab/instructlab/actions">triggered manually on the actions page</a> for the repository.
It also runs automatically against the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch at 11AM UTC every day.</p>
<section id="e2e-test-coverage-options">
<h3>E2E Test Coverage Options<a class="headerlink" href="#e2e-test-coverage-options" title="Link to this heading">¬∂</a></h3>
<p>You can specify the following flags to test the small, medium, and large t-shirt sizes with the <code class="docutils literal notranslate"><span class="pre">e2e-ci.sh</span></code>
script.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Feature</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>Run the e2e workflow for the small t-shirt size of hardware</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p>Run the e2e workflow for the medium t-shirt size of hardware</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">l</span></code></p></td>
<td><p>Run the e2e workflow for the large t-shirt size of hardware</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xl</span></code></p></td>
<td><p>Run the e2e workflow for the x-large t-shirt size of hardware</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">p</span></code></p></td>
<td><p>Preserve the E2E_TEST_DIR for debugging</p></td>
</tr>
</tbody>
</table>
</div>
<p>You can specify the following flags to test various features of <code class="docutils literal notranslate"><span class="pre">ilab</span></code> with the
<code class="docutils literal notranslate"><span class="pre">e2e-custom.sh</span></code> script.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Feature</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">e</span></code></p></td>
<td><p>Run model evaluation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">F</span></code></p></td>
<td><p>Run ‚Äúfullsize‚Äù SDG</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">q</span></code></p></td>
<td><p>Run the ‚Äòsimple‚Äô training pipeline with 4 bit quantization</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>Run the ‚Äòsimple‚Äô training pipeline</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f</span></code></p></td>
<td><p>Use the ‚Äòfull‚Äô training pipeline optimized for CPU and MPS rather than simple training</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">a</span></code></p></td>
<td><p>Use the ‚Äòaccelerated‚Äô training library rather than simple or full training</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p>Run minimal configuration (lower number of instructions and training epochs)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">M</span></code></p></td>
<td><p>Use Mixtral model (4-bit quantized) instead of Merlinite (4-bit quantized)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">P</span></code></p></td>
<td><p>Use the phased training within the ‚Äòfull‚Äô training library</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">v</span></code></p></td>
<td><p>Run with vLLM for serving</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="current-e2e-jobs">
<h3>Current E2E Jobs<a class="headerlink" href="#current-e2e-jobs" title="Link to this heading">¬∂</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>T-Shirt Size</p></th>
<th class="head"><p>Runner Host</p></th>
<th class="head"><p>Instance Type</p></th>
<th class="head"><p>OS</p></th>
<th class="head"><p>GPU Type</p></th>
<th class="head"><p>Script</p></th>
<th class="head"><p>Flags</p></th>
<th class="head"><p>Runs when?</p></th>
<th class="head"><p>Slack/Discord reporting?</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-t4-x1.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-t4-x1.yml</span></code></a></p></td>
<td><p>Small</p></td>
<td><p>AWS</p></td>
<td><p><a class="reference external" href="https://aws.amazon.com/ec2/instance-types/g4/"><code class="docutils literal notranslate"><span class="pre">g4dn.2xlarge</span></code></a></p></td>
<td><p>CentOS Stream 9</p></td>
<td><p>1 x NVIDIA Tesla T4 w/ 16 GB VRAM</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">e2e-ci.sh</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p>Pull Requests, Push to <code class="docutils literal notranslate"><span class="pre">main</span></code> or <code class="docutils literal notranslate"><span class="pre">release-*</span></code> branch</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l4-x1.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-l4-x1.yml</span></code></a></p></td>
<td><p>Medium</p></td>
<td><p>AWS</p></td>
<td><p><a class="reference external" href="https://aws.amazon.com/ec2/instance-types/g5/"><code class="docutils literal notranslate"><span class="pre">g6.8xlarge</span></code></a></p></td>
<td><p>CentOS Stream 9</p></td>
<td><p>1 x NVIDIA L4 w/ 24 GB VRAM</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">e2e-ci.sh</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p>Pull Requests, Push to <code class="docutils literal notranslate"><span class="pre">main</span></code> or <code class="docutils literal notranslate"><span class="pre">release-*</span></code> branch</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l40s-x4.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-l40s-x4.yml</span></code></a></p></td>
<td><p>Large</p></td>
<td><p>AWS</p></td>
<td><p><a class="reference external" href="https://aws.amazon.com/ec2/instance-types/g6e/"><code class="docutils literal notranslate"><span class="pre">g6e.12xlarge</span></code></a></p></td>
<td><p>CentOS Stream 9</p></td>
<td><p>4 x NVIDIA L40S w/ 48 GB VRAM (192 GB)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">e2e-ci.sh</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">l</span></code></p></td>
<td><p>Manually by Maintainers, Automatically against <code class="docutils literal notranslate"><span class="pre">main</span></code> branch at 11AM UTC</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l40s-x8.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-l40s-x8.yml</span></code></a></p></td>
<td><p>X-Large</p></td>
<td><p>AWS</p></td>
<td><p><a class="reference external" href="https://aws.amazon.com/ec2/instance-types/g6e/"><code class="docutils literal notranslate"><span class="pre">g6e.48xlarge</span></code></a></p></td>
<td><p>CentOS Stream 9</p></td>
<td><p>8 x NVIDIA L40S w/ 192 GB VRAM (384 GB)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">e2e-ci.sh</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">xl</span></code></p></td>
<td><p>Manually by Maintainers, Automatically against <code class="docutils literal notranslate"><span class="pre">main</span></code> branch at 11AM UTC</p></td>
<td><p>Yes</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="e2e-test-coverage-matrix">
<h3>E2E Test Coverage Matrix<a class="headerlink" href="#e2e-test-coverage-matrix" title="Link to this heading">¬∂</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Area</p></th>
<th class="head"><p>Feature</p></th>
<th class="head"><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-t4-x1.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-t4-x1.yml</span></code></a></p></th>
<th class="head"><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l4-x1.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-l4-x1.yml</span></code></a></p></th>
<th class="head"><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l40s-x4.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-l40s-x4.yml</span></code></a></p></th>
<th class="head"><p><a class="reference external" href="https://github.com/instructlab/instructlab/blob/main/.github/workflows/e2e-nvidia-l40s-x8.yml"><code class="docutils literal notranslate"><span class="pre">e2e-nvidia-l40s-x8.yml</span></code></a></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Serving</strong></p></td>
<td><p>llama-cpp</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>vllm</p></td>
<td><p>‚éØ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
</tr>
<tr class="row-even"><td><p><strong>Generate</strong></p></td>
<td><p>simple</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>full</p></td>
<td><p>‚éØ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
</tr>
<tr class="row-even"><td><p><strong>Training</strong></p></td>
<td><p>simple</p></td>
<td><p>‚úÖ(*1)</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>full</p></td>
<td><p>‚éØ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>accelerated (multi-phase)</p></td>
<td><p>‚éØ</p></td>
<td><p>‚éØ</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Eval</strong></p></td>
<td><p>eval</p></td>
<td><p>‚éØ</p></td>
<td><p>‚úÖ(*2)</p></td>
<td><p>‚úÖ</p></td>
<td><p>‚úÖ</p></td>
</tr>
</tbody>
</table>
</div>
<p>Points of clarification (*):</p>
<ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">simple</span></code> training pipeline uses 4-bit-quantization. We cannot use the trained model here due to <a class="reference external" href="https://github.com/instructlab/instructlab/issues/579">#579</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MMLU</span> <span class="pre">Branch</span></code> is not run as the <code class="docutils literal notranslate"><span class="pre">full</span></code> SDG pipeline does not create the needed files in the tasks directory when only training against a skill.</p></li>
</ol>
</section>
<section id="discord-slack-reporting">
<h3>Discord/Slack reporting<a class="headerlink" href="#discord-slack-reporting" title="Link to this heading">¬∂</a></h3>
<p>Some E2E jobs send their results to the channel <code class="docutils literal notranslate"><span class="pre">#e2e-ci-results</span></code> via the <code class="docutils literal notranslate"><span class="pre">Son</span> <span class="pre">of</span> <span class="pre">Jeeves</span></code> bot in both Discord and Slack. You can see which jobs currently have reporting via the ‚ÄúCurrent E2E Jobs‚Äù table above.</p>
<p>In Slack, this has been implemented via <a class="reference external" href="https://github.com/slackapi/slack-github-action?tab=readme-ov-file#technique-2-slack-app">the official Slack GitHub Action</a>.
In Discord, we use <a class="reference external" href="https://github.com/sarisia/actions-status-discord">actions/actions-status-discord</a> and the built-in channel webhooks feature.</p>
</section>
<section id="triggering-an-e2e-job-via-github-web-ui">
<h3>Triggering an E2E job via GitHub Web UI<a class="headerlink" href="#triggering-an-e2e-job-via-github-web-ui" title="Link to this heading">¬∂</a></h3>
<p>For the E2E jobs that can be launched manually, they take an input field that
specifies the PR number or git branch to run them against. If you run them
against a PR, they will automatically post a comment to the PR when the tests
begin and end so it‚Äôs easier for those involved in the PR to follow the results.</p>
<ol class="arabic simple">
<li><p>Visit the <a class="reference external" href="https://github.com/instructlab/instructlab/actions">Actions tab</a>.</p></li>
<li><p>Click on one of the E2E workflows on the left side of the page.</p></li>
<li><p>Click on the <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">workflow</span></code> button on the right side of the page.</p></li>
<li><p>Enter a branch name or a PR number in the input field.</p></li>
<li><p>Click the green <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">workflow</span></code> button.</p></li>
</ol>
<p>Here is an example of using the GitHub Web UI to launch an E2E workflow:</p>
<p><img alt="GitHub Actions Run Workflow Example" src="../_images/github-actions-run-workflow-example.png" /></p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="release-strategy.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">InstructLab CLI Release Strategy</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Maintainer Documentation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, InstructLab Authors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">CI for InstructLab</a><ul>
<li><a class="reference internal" href="#unit-tests">Unit tests</a></li>
<li><a class="reference internal" href="#functional-tests">Functional tests</a></li>
<li><a class="reference internal" href="#end-to-end-e2e-tests">End-to-end (E2E) tests</a><ul>
<li><a class="reference internal" href="#e2e-test-coverage-options">E2E Test Coverage Options</a></li>
<li><a class="reference internal" href="#current-e2e-jobs">Current E2E Jobs</a></li>
<li><a class="reference internal" href="#e2e-test-coverage-matrix">E2E Test Coverage Matrix</a></li>
<li><a class="reference internal" href="#discord-slack-reporting">Discord/Slack reporting</a></li>
<li><a class="reference internal" href="#triggering-an-e2e-job-via-github-web-ui">Triggering an E2E job via GitHub Web UI</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>